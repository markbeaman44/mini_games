<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Color Match Puzzle ‚Äî Fun Kids Game</title>
  <style>
    :root{
      --bg:#FFE5F1;
      --primary:#FF6B9D;
      --secondary:#4ECDC4;
      --accent:#FFD93D;
      --panel:#ffffffee;
      --success:#4CAF50;
    }
    html,body{height:100vh;height:100dvh;margin:0;overflow:hidden;font-family:'Comic Sans MS',cursive,system-ui;background:linear-gradient(135deg,var(--bg),#F0E5FF)}
    .game-wrapper{height:100%;display:flex;align-items:center;justify-content:center;padding:20px;box-sizing:border-box}
    .game-container{display:flex;flex-direction:column;align-items:center;gap:12px}
    .game{width:min(800px,95vw);height:min(650px,85vh);background:linear-gradient(135deg,#FFE5F1,#F0E5FF);border-radius:20px;box-shadow:0 10px 40px rgba(0,0,0,0.15);position:relative;overflow:hidden}
    
    #backButton{position:fixed;top:20px;left:20px;background:#FF6B9D;color:white;border:none;border-radius:12px;padding:10px 18px;cursor:pointer;font-weight:700;font-size:16px;box-shadow:0 4px 15px rgba(0,0,0,0.2);transition:all 0.3s ease;z-index:1000}
    #backButton:hover{background:#FF5588;transform:translateY(-2px)}
    #backButton:active{transform:translateY(0)}
    
    header{position:absolute;left:20px;top:15px;z-index:10;display:flex;gap:15px;align-items:center;flex-wrap:wrap}
    .panel{background:var(--panel);padding:8px 14px;border-radius:12px;font-weight:700;display:flex;gap:6px;align-items:center;box-shadow:0 4px 12px rgba(0,0,0,0.1)}
    .score-text{font-size:16px;color:#2E7D32}
    
    .game-layout{position:absolute;left:50%;top:55%;transform:translate(-50%,-50%);display:flex;gap:60px;align-items:flex-start;justify-content:center;flex-wrap:nowrap;min-width:fit-content}
    
    .pattern-section{display:flex;flex-direction:column;align-items:center;gap:10px}
    .pattern-label{font-size:18px;font-weight:bold;color:#FF6B9D;text-shadow:1px 1px 2px rgba(0,0,0,0.1)}
    .pattern-display{display:grid;gap:6px;padding:15px;background:rgba(255,255,255,0.95);border-radius:15px;box-shadow:0 4px 12px rgba(0,0,0,0.1)}
    .pattern-tile{width:50px;height:50px;border-radius:8px;border:2px solid rgba(0,0,0,0.1);display:flex;align-items:center;justify-content:center;font-size:20px}
    
    .puzzle-section{display:flex;flex-direction:column;align-items:center;gap:10px}
    .puzzle-label{font-size:18px;font-weight:bold;color:#4ECDC4;text-shadow:1px 1px 2px rgba(0,0,0,0.1)}
    .puzzle-area{display:grid;gap:8px;padding:20px;background:rgba(255,255,255,0.9);border-radius:20px;box-shadow:0 8px 25px rgba(0,0,0,0.15)}
    
    .tile{width:80px;height:80px;border-radius:15px;cursor:pointer;transition:all 0.3s ease;display:flex;align-items:center;justify-content:center;font-size:24px;font-weight:bold;color:white;text-shadow:1px 1px 2px rgba(0,0,0,0.3);border:3px solid transparent;position:relative;overflow:hidden}
    .tile:hover{transform:scale(1.05);box-shadow:0 5px 15px rgba(0,0,0,0.2)}
    .tile.selected{border:3px solid #FFD93D;transform:scale(1.1)}
    .tile.matched{animation:matchPulse 0.6s ease-out}
    .tile.wrong{animation:wrongShake 0.5s ease-out}
    
    .start-screen{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:15;background:linear-gradient(135deg,#FFE0F0,#F0F8FF);padding:30px;border-radius:20px;text-align:center;box-shadow:0 10px 30px rgba(0,0,0,0.2);max-width:400px}
    .start-screen h2{margin:0 0 15px 0;color:#FF6B9D;font-size:26px}
    .start-screen p{margin:8px 0;color:#555;font-size:15px;line-height:1.4}
    .start-btn{margin-top:20px;padding:12px 24px;border-radius:15px;font-weight:800;border:0;background:#4ECDC4;color:white;font-size:18px;cursor:pointer;transition:all 0.3s ease}
    .start-btn:hover{background:#45B7B8;transform:scale(1.05)}
    
    .level-complete{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);z-index:15;background:linear-gradient(135deg,#E8F5E8,#F0F8FF);padding:30px;border-radius:20px;text-align:center;box-shadow:0 10px 30px rgba(0,0,0,0.2);display:none;max-width:350px}
    .level-complete h2{margin:0 0 15px 0;color:#4CAF50;font-size:24px}
    .level-complete p{margin:8px 0;color:#555;font-size:14px}
    
    .instructions{position:absolute;bottom:10px;left:50%;transform:translateX(-50%);background:rgba(255,255,255,0.9);padding:10px 20px;border-radius:12px;text-align:center;font-size:14px;color:#666;box-shadow:0 4px 12px rgba(0,0,0,0.1)}
    
    @keyframes matchPulse{0%{transform:scale(1)}50%{transform:scale(1.2);box-shadow:0 0 20px rgba(76,175,80,0.6)}100%{transform:scale(1)}}
    @keyframes wrongShake{0%,100%{transform:translateX(0)}25%{transform:translateX(-5px)}75%{transform:translateX(5px)}}
    @keyframes celebration{0%{transform:scale(1)}50%{transform:scale(1.1)}100%{transform:scale(1)}}
    
    @media (max-width:600px){
      .game{height:min(550px,85vh)}
      .game-layout{flex-direction:column;gap:20px;align-items:center}
      .tile{width:60px;height:60px;font-size:20px}
      .pattern-tile{width:40px;height:40px;font-size:16px}
      .panel{padding:6px 10px;font-size:14px}
      .instructions{font-size:12px;padding:8px 15px}
      .puzzle-area{gap:6px;padding:15px}
      .pattern-label,.puzzle-label{font-size:16px}
    }
    @media (max-width:900px) and (min-width:601px){
      .game-layout{gap:30px}
      .tile{width:70px;height:70px;font-size:22px}
      .pattern-tile{width:45px;height:45px;font-size:18px}
    }
  </style>
</head>
<body>
  <button id="backButton">‚Üê Back</button>
  <div class="game-wrapper">
    <div class="game-container">
      <div class="game" id="gameRoot">
        <header>
          <div class="panel">
            <span class="score-text">Level: <span id="level">1</span></span>
          </div>
          <div class="panel">
            <span class="score-text">Score: <span id="score">0</span></span>
          </div>
          <div class="panel">
            <span class="score-text">Moves: <span id="moves">0</span></span>
          </div>
          <div class="panel">
            <span class="score-text">‚≠ê <span id="stars">0</span></span>
          </div>
        </header>

        <div class="start-screen" id="startScreen">
          <h2>üß© Color Match Puzzle! üß©</h2>
          <p>Match the colorful pattern by clicking tiles!</p>
          <p>üéØ Look at the target pattern on the left</p>
          <p>üß© Click tiles on the right to match the colors</p>
          <p>üåü Fewer moves = more stars!</p>
          <p>üé® Each level gets more challenging!</p>
          <button class="start-btn" id="startBtn">Start Puzzle!</button>
        </div>

        <div class="level-complete" id="levelCompleteScreen">
          <h2>üéâ Level Complete! üéâ</h2>
          <p id="completionMessage">Great job!</p>
          <p id="starRating">‚≠ê‚≠ê‚≠ê</p>
          <button class="start-btn" id="nextLevelBtn">Next Level!</button>
        </div>

        <div class="game-layout" id="gameLayout">
          <div class="pattern-section">
            <div class="pattern-label">üéØ Target Pattern</div>
            <div class="pattern-display" id="patternDisplay"></div>
          </div>
          
          <div class="puzzle-section">
            <div class="puzzle-label">üß© Your Puzzle</div>
            <div class="puzzle-area" id="puzzleArea"></div>
          </div>
        </div>
        
        <div class="instructions" id="instructions">
          Match the target pattern!
        </div>
      </div>
    </div>
  </div>

<script>
(() => {
  // Game elements
  const levelEl = document.getElementById('level');
  const scoreEl = document.getElementById('score');
  const movesEl = document.getElementById('moves');
  const starsEl = document.getElementById('stars');
  const startScreen = document.getElementById('startScreen');
  const levelCompleteScreen = document.getElementById('levelCompleteScreen');
  const completionMessageEl = document.getElementById('completionMessage');
  const starRatingEl = document.getElementById('starRating');
  const patternDisplay = document.getElementById('patternDisplay');
  const puzzleArea = document.getElementById('puzzleArea');
  const startBtn = document.getElementById('startBtn');
  const nextLevelBtn = document.getElementById('nextLevelBtn');
  const backBtn = document.getElementById('backButton');
  const instructionsEl = document.getElementById('instructions');

  // Game state
  let currentLevel = 1;
  let score = 0;
  let moves = 0;
  let totalStars = 0;
  let gameActive = false;
  
  // Puzzle state
  let targetPattern = [];
  let currentPattern = [];
  let gridSize = 3; // Start with 3x3
  
  // Colors for the puzzle
  const colors = [
    { bg: '#FF6B9D', name: 'üå∏' }, // Pink
    { bg: '#4ECDC4', name: 'üåä' }, // Cyan
    { bg: '#FFD93D', name: '‚òÄÔ∏è' }, // Yellow
    { bg: '#9B59B6', name: 'üçá' }, // Purple
    { bg: '#E74C3C', name: 'üçé' }, // Red
    { bg: '#2ECC71', name: 'üçÄ' }, // Green
    { bg: '#F39C12', name: 'üß°' }, // Orange
    { bg: '#3498DB', name: 'üíô' }  // Blue
  ];

  // Initialize game
  function init() {
    updateUI();
    showStartScreen();
  }

  function updateUI() {
    levelEl.textContent = currentLevel;
    scoreEl.textContent = score;
    movesEl.textContent = moves;
    starsEl.textContent = totalStars;
  }

  function showStartScreen() {
    startScreen.style.display = 'block';
    levelCompleteScreen.style.display = 'none';
    gameActive = false;
  }

  function startLevel() {
    startScreen.style.display = 'none';
    levelCompleteScreen.style.display = 'none';
    gameActive = true;
    moves = 0;
    
    // Increase grid size every few levels
    gridSize = Math.min(3 + Math.floor((currentLevel - 1) / 3), 5);
    
    generateLevel();
    updateUI();
    updateInstructions();
  }

  function generateLevel() {
    const totalTiles = gridSize * gridSize;
    const numColors = Math.min(3 + Math.floor(currentLevel / 2), colors.length);
    
    // Generate target pattern
    targetPattern = [];
    for (let i = 0; i < totalTiles; i++) {
      targetPattern.push(Math.floor(Math.random() * numColors));
    }
    
    // Generate starting pattern (different from target)
    currentPattern = [];
    for (let i = 0; i < totalTiles; i++) {
      let colorIndex;
      do {
        colorIndex = Math.floor(Math.random() * numColors);
      } while (colorIndex === targetPattern[i] && Math.random() < 0.7); // 70% chance to be different
      currentPattern.push(colorIndex);
    }
    
    createPuzzleGrid();
    createPatternDisplay();
  }

  function createPatternDisplay() {
    patternDisplay.innerHTML = '';
    patternDisplay.style.gridTemplateColumns = `repeat(${gridSize}, 1fr)`;
    patternDisplay.style.display = 'grid';
    patternDisplay.style.gap = '4px';
    
    targetPattern.forEach(colorIndex => {
      const tile = document.createElement('div');
      tile.className = 'pattern-tile';
      tile.style.backgroundColor = colors[colorIndex].bg;
      tile.textContent = colors[colorIndex].name;
      tile.style.fontSize = '16px';
      tile.style.display = 'flex';
      tile.style.alignItems = 'center';
      tile.style.justifyContent = 'center';
      patternDisplay.appendChild(tile);
    });
  }

  function createPuzzleGrid() {
    puzzleArea.innerHTML = '';
    puzzleArea.style.gridTemplateColumns = `repeat(${gridSize}, 1fr)`;
    
    currentPattern.forEach((colorIndex, index) => {
      const tile = document.createElement('div');
      tile.className = 'tile';
      tile.style.backgroundColor = colors[colorIndex].bg;
      tile.textContent = colors[colorIndex].name;
      tile.dataset.index = index;
      
      tile.addEventListener('click', () => handleTileClick(index));
      puzzleArea.appendChild(tile);
    });
  }

  function handleTileClick(index) {
    if (!gameActive) return;
    
    const numColors = Math.min(3 + Math.floor(currentLevel / 2), colors.length);
    currentPattern[index] = (currentPattern[index] + 1) % numColors;
    
    const tile = puzzleArea.children[index];
    const newColor = colors[currentPattern[index]];
    tile.style.backgroundColor = newColor.bg;
    tile.textContent = newColor.name;
    
    moves++;
    updateUI();
    
    // Check if tile matches target
    if (currentPattern[index] === targetPattern[index]) {
      tile.classList.add('matched');
      setTimeout(() => tile.classList.remove('matched'), 600);
      playSound(660, 0.1);
    } else {
      tile.classList.add('wrong');
      setTimeout(() => tile.classList.remove('wrong'), 500);
      playSound(220, 0.1);
    }
    
    checkWinCondition();
  }

  function checkWinCondition() {
    const isComplete = currentPattern.every((color, index) => color === targetPattern[index]);
    
    if (isComplete) {
      gameActive = false;
      
      // Calculate stars based on moves
      const optimalMoves = gridSize * gridSize * 0.7; // Rough estimate
      let starsEarned = 3;
      if (moves > optimalMoves * 1.5) starsEarned = 1;
      else if (moves > optimalMoves) starsEarned = 2;
      
      totalStars += starsEarned;
      score += starsEarned * 100 + Math.max(0, 50 - moves);
      
      // Celebrate
      setTimeout(() => {
        showLevelComplete(starsEarned);
        createCelebrationParticles();
        playSound(440, 0.3);
      }, 500);
    }
  }

  function showLevelComplete(starsEarned) {
    levelCompleteScreen.style.display = 'block';
    
    const messages = [
      "Keep trying! üåü",
      "Good job! üåüüåü", 
      "Perfect! üåüüåüüåü"
    ];
    
    completionMessageEl.textContent = messages[starsEarned - 1];
    starRatingEl.textContent = '‚≠ê'.repeat(starsEarned);
    
    updateUI();
  }

  function nextLevel() {
    currentLevel++;
    startLevel();
  }

  function updateInstructions() {
    const numColors = Math.min(3 + Math.floor(currentLevel / 2), colors.length);
    instructionsEl.textContent = `Cycle through ${numColors} colors and match the pattern above!`;
  }

  function createCelebrationParticles() {
    const gameRoot = document.getElementById('gameRoot');
    const colors = ['#FFD700', '#FF69B4', '#4ECDC4', '#FF6B9D', '#9B59B6', '#2ECC71'];
    
    for (let i = 0; i < 20; i++) {
      setTimeout(() => {
        const particle = document.createElement('div');
        particle.style.position = 'absolute';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.top = '-10px';
        particle.style.width = '10px';
        particle.style.height = '10px';
        particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        particle.style.borderRadius = '50%';
        particle.style.pointerEvents = 'none';
        particle.style.zIndex = '20';
        particle.style.animation = 'fall 3s linear forwards';
        
        gameRoot.appendChild(particle);
        setTimeout(() => particle.remove(), 3000);
      }, i * 100);
    }
  }

  function playSound(freq, duration) {
    try {
      const audioContext = new (window.AudioContext || window.webkitAudioContext)();
      const oscillator = audioContext.createOscillator();
      const gainNode = audioContext.createGain();
      
      oscillator.connect(gainNode);
      gainNode.connect(audioContext.destination);
      
      oscillator.frequency.value = freq;
      oscillator.type = 'sine';
      
      gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
      
      oscillator.start(audioContext.currentTime);
      oscillator.stop(audioContext.currentTime + duration);
    } catch (e) {
      // Ignore audio errors
    }
  }

  // Event listeners
  startBtn.addEventListener('click', startLevel);
  nextLevelBtn.addEventListener('click', nextLevel);
  backBtn.addEventListener('click', () => {
    window.location.href = 'home.html';
  });

  // Keyboard support for starting game
  window.addEventListener('keydown', (e) => {
    if (e.key === ' ' || e.key === 'Enter') {
      e.preventDefault();
      if (!gameActive && startScreen.style.display !== 'none') {
        startLevel();
      } else if (!gameActive && levelCompleteScreen.style.display !== 'none') {
        nextLevel();
      }
    }
  });

  // Add CSS for falling particles
  const style = document.createElement('style');
  style.textContent = `
    @keyframes fall {
      0% { top: -10px; opacity: 1; }
      100% { top: 100vh; opacity: 0; }
    }
  `;
  document.head.appendChild(style);

  // Initialize the game
  init();
})();

window.addEventListener("load", function() {
  setTimeout(() => {
    window.scrollTo(0, 1);
  }, 100);
});
</script>
</body>
</html>
